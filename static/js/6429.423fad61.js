"use strict";(self.webpackChunkhaisha_recharge_website=self.webpackChunkhaisha_recharge_website||[]).push([[6429],{64423:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(29439),o=t(47313);const r=function useFormValidate(){var e=(0,o.useState)(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1];return{validated:t,setValidated:r,onFieldsChange:function onFieldsChange(e,n){var t=null===n||void 0===n?void 0:n.find((function(e){var n;return(null===e||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.length)>0}));r(!t)},changeValidated:function changeValidated(e){r(e)}}}},48121:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(29439),o=t(47313),r=t(98857),a={key:"mobile",name:"\u624b\u673a\u767b\u5f55"},u={key:"email",name:"\u90ae\u7bb1\u767b\u5f55"};const s=function useLoginType(){var e=(0,r.Z)().isOversea,n=(0,o.useState)(e?"email":"mobile"),t=(0,i.Z)(n,2),s=t[0],l=t[1];return{loginTypeMap:e?[u,a]:[a,u],loginType:s,changeType:function changeType(e){l(e)},isOversea:e}}},75218:(e,n,t)=>{t.d(n,{iC:()=>p,Rb:()=>h,CE:()=>k,nn:()=>y,Z3:()=>C,xn:()=>S,HU:()=>b,FP:()=>Z,z8:()=>I,co:()=>_,Tk:()=>w,vy:()=>N,h4:()=>T});var i=t(29439),o=t(4942),r=t(1413),a=t(74165),u=t(15861),s=t(47313),l=t(62118),c=t(66825),d=t(66654),g=t(43798),f=t(20048),v="AT5749496294586835974",m=function(){var e=(0,u.Z)((0,a.Z)().mark((function _callee(e,n){var t,i;return(0,a.Z)().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.goodsApis.getActivityInfoByNo({activityNo:v});case 2:return t=o.sent,i=t.result,o.abrupt("return",n.ConfigStore.rightsConfig=i);case 5:case"end":return o.stop()}}),_callee)})));return function getRightsActivityConfig(n,t){return e.apply(this,arguments)}}(),p=function(){var e=(0,u.Z)((0,a.Z)().mark((function _callee2(e,n){var t,i;return(0,a.Z)().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.userApis.getUserRights({activityNo:v},(0,f.cD)());case 2:return t=o.sent,i=t.result,o.abrupt("return",n.UserStore.rightsInfo=i);case 5:case"end":return o.stop()}}),_callee2)})));return function getUserRights(n,t){return e.apply(this,arguments)}}(),h=function writeRightsCache(e,n,t){var i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=null!==(i=d.J.get(e))&&void 0!==i?i:{};u[n]=(0,r.Z)((0,r.Z)({},u[n]),{},(0,o.Z)({},t,a)),d.J.set(e,u)},k=function checkNeedShow(e,n,t,i){var o,r,a,u,s=null!==(o=d.J.get(e))&&void 0!==o?o:{},l=null===(r=t.ConfigStore.userinfo)||void 0===r?void 0:r.id,c=null===(a=t.UserStore.rightsInfo)||void 0===a?void 0:a.level,g=null!==(u=null===s||void 0===s?void 0:s[l])&&void 0!==u?u:{};Object.keys(g).forEach((function(n){var t=Number(n);t>c&&(g[n]=!1,h(e,l,t,!1))})),g[c]||(n(!0),i&&h(e,l,c))},y=function checkUserRightsActOpen(e){return!1},C=function checkUserHasRights(e){var n;return y(e)&&!(null===(n=e.UserStore.rightsInfo)||void 0===n||!n.level)},S=function checkGoodsHasRights(e,n){var t,i,o,r;return y(n)&&!(null!==(t=n.ConfigStore.rightsConfig)&&void 0!==t&&null!==(i=t.activityConfig)&&void 0!==i&&null!==(o=i.blacklist)&&void 0!==o&&null!==(r=o.split(","))&&void 0!==r&&r.includes(e))},b=function formatDiscount(e){return e&&100*(null!==e&&void 0!==e?e:1)||"--"},Z=function getUserRightsDiscountAmt(e){var n,t;return e&&null!==(n=null===(t=(0,f.fS)("activity_discount",e))||void 0===t?void 0:t.discountAmt)&&void 0!==n?n:0},I=function getUserVipDiscountAmt(e){var n,t;return e&&null!==(n=null===(t=(0,f.fS)("discount_card",e))||void 0===t?void 0:t.discountAmt)&&void 0!==n?n:0},_=function useUserRightsInit(){var e=(0,l.oR)(),n=(0,l.hk)(),t=(0,c.f)().isLogin,i=(0,s.useMemo)((function(){return y(e)}),[e.ConfigStore.rightsConfig]);(0,s.useEffect)((function(){m(n,e)}),[]),(0,s.useEffect)((function(){t&&i&&p(n,e)}),[t,i])},w=function useUserRightsPop(e,n){var t=(0,s.useState)(!1),o=(0,i.Z)(t,2),r=o[0],a=o[1],u=(0,l.hk)(),d=(0,l.oR)(),v=(0,c.f)().isLogin,m="home"===e,h="success"===e,S=m?"\u70b9\u51fb\u524d\u5f80":"\u7acb\u5373\u9886\u53d6";return(0,s.useEffect)((function(){h&&y(d)&&p(u,d)}),[h,d.ConfigStore.rightsConfig]),(0,s.useEffect)((function(){C(d)?k(g.$.RIGHTS_POP_INFO,a,d,m):d.UserStore.rightsInfo&&d.ConfigStore.rightsConfig&&a(!1)}),[d.UserStore.rightsInfo,d.ConfigStore.rightsConfig,m]),(0,s.useEffect)((function(){return function(){h&&!v&&(d.UserStore.rightsInfo=null)}}),[h,v]),{visible:r,onOk:function onOk(){if(a(!1),m){var e,t,i,o,r="pc"===d.CommonStore.device?null===(e=d.ConfigStore.rightsConfig)||void 0===e||null===(t=e.activityConfig)||void 0===t?void 0:t.webJumplink:null===(i=d.ConfigStore.rightsConfig)||void 0===i||null===(o=i.activityConfig)||void 0===o?void 0:o.Jumplink;if(!r)return;(0,f.cW)(r,!0)}else n("\u9886\u53d6\u6210\u529f\uff0c\u8bb0\u5f97\u4f7f\u7528\u54e6~")},okText:S,setVisible:a,onClose:function onClose(e){e.stopPropagation(),a(!1)},store:d}},N=function getUserRightsActivityNo(e){return C(e)&&e.CommonStore.isShowDiscountEntry?v:void 0},T=function useUserRightsActivity(e){var n=(0,l.oR)();return{activityNo:(0,s.useMemo)((function(){return N(n)}),[n.ConfigStore.rightsConfig,n.UserStore.rightsInfo,n.CommonStore.isShowDiscountEntry])}}},70570:(e,n,t)=>{t.d(n,{Z:()=>a});var i=t(1413),o=t(47313),r=t(20048);const a=function useGoodsDetail(e){var n=null===e||void 0===e?void 0:e.id;return{bannerImgs:(0,o.useMemo)((function(){return(0,r.nq)(e)}),[e]),skuData:(0,o.useMemo)((function(){var t,o,r;if(null===e||void 0===e||!e.hasSkuTree)return[{dimension:1,skuCategoryName:"",skuMap:{},isCustom:!0,skuMapList:[{isLeaf:1,skuName:(null===e||void 0===e||null===(t=e.cols)||void 0===t?void 0:t.productName)||(null===e||void 0===e?void 0:e.product_name)||"",gameId:(null===e||void 0===e?void 0:e.id)||0,gameIds:[(null===e||void 0===e?void 0:e.id)||0],subSku:null,productName:(null===e||void 0===e||null===(o=e.cols)||void 0===o?void 0:o.productName)||(null===e||void 0===e?void 0:e.product_name)||"",icon:"",instruc:"",alonePrice:(null===e||void 0===e||null===(r=e.alone)||void 0===r?void 0:r.price)||(null===e||void 0===e?void 0:e.price),originalPrice:0}]}];var a=[];return function check(e){if(e){var t=e.skuMap;if(t){var o={},r=Object.keys(t).map((function(e){var i=Number(n),r=t[e];return r.gameId=r.gameIds.includes(i)?i:r.gameId||r.gameIds[0],r.gameIds.includes(i)&&(o=r),r}));if(a.push((0,i.Z)((0,i.Z)({},e),{},{skuMapList:r})),1===o.isLeaf)return;check(o.subSku)}}}(e.hasSkuTree),a}),[e,n]),Products:(0,o.useMemo)((function(){if(null!==e&&void 0!==e&&e.hasSkuTree){var n=(null===e||void 0===e?void 0:e.hasSkuTree).skuMap;return Object.keys(n).map((function(t){return n[t].gameIds.includes(Number(e.id))?(0,i.Z)((0,i.Z)({},n[t]),{},{gameId:e.id,product_name:n[t].skuName}):(0,i.Z)((0,i.Z)({},n[t]),{},{gameId:n[t].gameIds[0],product_name:n[t].skuName})}))}return[{gameId:null===e||void 0===e?void 0:e.id,product_name:null===e||void 0===e?void 0:e.product_name}]}),[e]),Versions:(0,o.useMemo)((function(){if(null!==e&&void 0!==e&&e.hasSkuTree){var n=e.hasSkuTree.skuMap,t=Object.keys(n).map((function(e){return n[e]})).find((function(n){return n.gameIds.includes(Number(e.id))}));return null===t||void 0===t?void 0:t.subSku}}),[e]),onVersionChange:function onVersionChange(e){r.m8.replace(e)}}}},61221:(e,n,t)=>{t.d(n,{f:()=>I,Z:()=>R});var i=t(1413),o=t(93433),r=(t(40378),t(30137)),a=t(74165),u=t(15861),s=t(29439),l=t(47313),c=t(55444),d=t(20048),g=t(54016),f=t(62118),v=t(66654),m=t(43798),p=t(46537),h=t(75218),k=t(44781),y=t(98857),C=t(48121),S=t(46123),b=t.n(S),Z=t(64423),I=function useNoVerifyLogin(){var e=(0,f.oR)(),n=(0,f.hk)(),t=function(){var t=(0,u.Z)((0,a.Z)().mark((function _callee2(t,r,u,s,l,g){var f,k,y,C,S,b,Z,I,_,w;return(0,a.Z)().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(f=(new Date).getTime(),k=String(f),y=(0,d.up)(t+"."+f),C=(0,d.mr)(e.CommonStore.nodeAdminConfig),S="buy"===s,b=[].concat((0,o.Z)((0,p.t)()),(0,o.Z)(null!==l&&void 0!==l?l:[])),a.prev=6,!r){a.next=13;break}return a.next=10,n.userApis.emailLoginWithoutVerificationCodeHttp({account:t,channel:C,tags:b,inviteCode:u,kardzH5OrderRetention:S,eventSource:(0,d.m3)(e.CommonStore.inApp,e.CommonStore.device),sourceIdentity:(0,d.WP)()},{headers:{timestamp:k,signature:y}});case 10:a.t0=a.sent.result,a.next=16;break;case 13:return a.next=15,n.userApis.loginWithoutVerificationCodeHttp({account:t,channel:C,type:8,tags:b,inviteCode:u,kardzH5OrderRetention:S,eventSource:(0,d.m3)(e.CommonStore.inApp,e.CommonStore.device),sourceIdentity:(0,d.WP)(),idc:null===g||void 0===g?void 0:g.replace("+","")},{headers:{timestamp:k,healthcheck:y}}).catch((function(e){return c.FN.show(e.message),Promise.reject(e)}));case 15:a.t0=a.sent.data;case 16:if(Z=a.t0,I=(0,i.Z)((0,i.Z)({},Z),{},{account:t,loginType:r?"email":"mobile"}),v.J.set(m.$.TEMP_LOGIN_INFO,I),a.t1=(0,h.nn)(e),!a.t1){a.next=23;break}return a.next=23,(0,h.iC)(n,e);case 23:return e.UserStore.tempLoginInfo=I,null!==I&&void 0!==I&&I.is_new&&(null===(_=window)||void 0===_||null===(w=_.gtag)||void 0===w||w.call(_,"event","sign_up",{method:"email"})),a.abrupt("return",Z);case 28:a.prev=28,a.t2=a.catch(6),c.FN.show(a.t2.message);case 31:case"end":return a.stop()}}),_callee2,null,[[6,28]])})));return function noVerifyLogin(e,n,i,o,r,a){return t.apply(this,arguments)}}();return{noVerifyLogin:t,noVerifyLogout:function noVerifyLogout(){v.J.remove(m.$.TEMP_LOGIN_INFO),e.UserStore.tempLoginInfo=null}}},_=(0,k.ZP)(g.Jr).withConfig({displayName:"no-verify-login__StyledBtn",componentId:"sc-1erz7r7-0"})(["margin-top:",";border-radius:"," !important;"],(0,d.gY)(15),(0,d.gY)(20)),w=k.ZP.div.withConfig({displayName:"no-verify-login__StyledBox",componentId:"sc-1erz7r7-1"})(["padding:",";.adm-form{--border-top:none;--border-bottom:none;}.adm-list-item{padding-left:0;}.adm-list-item-content{padding-right:0;}.ant-input{height:",";line-height:",";background:#ececec;border:none;border-radius:",";box-shadow:none !important;padding:0 ",";font-size:",";}hr{height:1px;background:#e9e9e9;border:none;margin-top:",";}"],(0,d.gY)(30),(0,d.gY)(40),(0,d.gY)(40),(0,d.gY)(20),(0,d.gY)(16),(0,d.gY)(14),(0,d.gY)(16)),N=k.ZP.ul.withConfig({displayName:"no-verify-login__StyledTab",componentId:"sc-1erz7r7-2"})(["display:flex;align-items:baseline;li{font-size:",";color:#666;margin-right:",";&.active{font-size:",";color:#333;font-weight:bold;}}"],(0,d.gY)(16),(0,d.gY)(24),(0,d.gY)(20)),T=(0,k.ZP)(c.GI).withConfig({displayName:"no-verify-login__StyledLoginPopup",componentId:"sc-1erz7r7-3"})([""]);const R=function NoVerifyLogin(e){var n=e.visible,t=e.onClose,i=e.onSuccess,o=e.inviteCode,g=(0,l.useState)(!1),v=(0,s.Z)(g,2),m=v[0],p=v[1],h=((0,f.oR)(),(0,f.hk)(),(0,y.Z)().isOversea),k=(0,C.Z)(),S=k.loginTypeMap,R=k.loginType,x=k.changeType,L="email"===R,E=c.l0.useForm(),U=(0,s.Z)(E,1)[0],V=U.validateFields,O=U.resetFields,P=(0,Z.Z)(),A=P.validated,M=P.onFieldsChange,F=P.changeValidated,Y=I().noVerifyLogin,z=function(){var e=(0,u.Z)((0,a.Z)().mark((function _callee(){var e,n;return(0,a.Z)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:return e=t.sent,n=e.account,p(!0),t.prev=5,t.next=8,Y(n,L,o);case 8:null===i||void 0===i||i(),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(5);case 13:p(!1);case 14:case"end":return t.stop()}}),_callee,null,[[5,11]])})));return function onSubmit(){return e.apply(this,arguments)}}();return l.createElement(T,{visible:n,onMaskClick:t,onClose:t,showCloseButton:!0,bodyStyle:{borderTopLeftRadius:"3.73vw",borderTopRightRadius:"3.73vw"}},l.createElement(w,null,l.createElement(N,null,S.map((function(e){return l.createElement("li",{key:e.key,className:b()({active:e.key===R}),onClick:function onClick(){return function onTabChange(e){x(e.key),O(),F(!1)}(e)}},e.name)}))),l.createElement(c.l0,{form:U,onFinish:z,onFieldsChange:M},L?l.createElement(c.l0.Item,{name:"account",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u672c\u4eba\u6709\u6548\u7684\u90ae\u7bb1"},{pattern:d.s9,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1"}]},l.createElement(r.default,{autoComplete:"off",placeholder:"\u8bf7\u8f93\u5165\u60a8\u672c\u4eba\u6709\u6548\u7684\u90ae\u7bb1",maxLength:64})):l.createElement(c.l0.Item,{name:"account",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u672c\u4eba\u6709\u6548\u7684\u624b\u673a\u53f7"},{pattern:d.KV,message:"\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u4e0d\u6b63\u786e"}]},l.createElement(r.default,{autoComplete:"off",maxLength:11,placeholder:"\u8bf7\u8f93\u5165\u60a8\u672c\u4eba\u6709\u6548\u7684\u624b\u673a\u53f7".concat(h?"(\u4ec5\u652f\u6301\u4e2d\u56fd\u5927\u9646)":"")})),l.createElement("hr",null),l.createElement(_,{disabled:!A,loading:m,color:"primary",block:!0,type:"submit"},"\u786e\u8ba4"))))}}}]);